@page
@model AdminApp.Pages.Categories.IndexModel
@{
    ViewData["Title"] = "Qu?n Lý Danh M?c";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Qu?n Lý Danh M?c</h2>
        <a asp-page="Create" class="btn btn-primary">
  <i class="fas fa-plus"></i> Thêm Danh M?c M?i
   </a>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
      @TempData["SuccessMessage"]
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
}

    <!-- Search and Filter -->
    <div class="card mb-4">
  <div class="card-body">
        <form method="get">
         <div class="row">
      <div class="col-md-6">
    <input type="text" name="searchString" value="@Model.SearchString"
      class="form-control" placeholder="Tìm ki?m theo tên danh m?c...">
      </div>
          <div class="col-md-3">
       <button type="submit" class="btn btn-primary">
    <i class="fas fa-search"></i> Tìm Ki?m
   </button>
     <a asp-page="Index" class="btn btn-secondary">
     <i class="fas fa-redo"></i> Reset
    </a>
       </div>
  </div>
      </form>
    </div>
    </div>

  <!-- Categories Table -->
<div class="card">
   <div class="card-body">
       <div class="table-responsive">
        <table class="table table-hover">
    <thead class="table-light">
      <tr>
       <th>ID</th>
       <th>Tên Danh M?c</th>
          <th>Mô T?</th>
     <th>Th? T?</th>
       <th>S? Câu H?i</th>
    <th>Thao Tác</th>
    </tr>
       </thead>
         <tbody>
       @foreach (var category in Model.Categories)
   {
 <tr>
    <td>@category.CategoryId</td>
        <td><strong>@category.CategoryName</strong></td>
   <td>@(category.Description ?? "N/A")</td>
   <td><span class="badge bg-info">@category.OrderIndex</span></td>
     <td><span class="badge bg-primary">@category.QuestionCount</span></td>
       <td>
     <a asp-page="Edit" asp-route-id="@category.CategoryId"
  class="btn btn-sm btn-warning" title="Ch?nh s?a">
        <i class="fas fa-edit"></i>
    </a>
 <a asp-page="Delete" asp-route-id="@category.CategoryId"
         class="btn btn-sm btn-danger" title="Xóa">
         <i class="fas fa-trash"></i>
       </a>
     </td>
     </tr>
  }
 </tbody>
      </table>
      </div>

     @if (!Model.Categories.Any())
        {
        <div class="alert alert-info text-center">
  Không tìm th?y danh m?c nào.
       </div>
  }

    <!-- Pagination -->
  @if (Model.TotalPages > 1)
   {
      <nav aria-label="Page navigation">
   <ul class="pagination justify-content-center">
 <li class="page-item @(Model.PageNumber == 1 ? "disabled" : "")">
  <a class="page-link" asp-page="Index"
       asp-route-pageNumber="@(Model.PageNumber - 1)"
 asp-route-searchString="@Model.SearchString">Tr??c</a>
    </li>

    @for (int i = 1; i <= Model.TotalPages; i++)
         {
        <li class="page-item @(i == Model.PageNumber ? "active" : "")">
  <a class="page-link" asp-page="Index"
         asp-route-pageNumber="@i"
   asp-route-searchString="@Model.SearchString">@i</a>
      </li>
}

           <li class="page-item @(Model.PageNumber == Model.TotalPages ? "disabled" : "")">
    <a class="page-link" asp-page="Index"
         asp-route-pageNumber="@(Model.PageNumber + 1)"
 asp-route-searchString="@Model.SearchString">Sau</a>
       </li>
      </ul>
     </nav>
     }
     </div>
    </div>
</div>